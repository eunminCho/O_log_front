{"ast":null,"code":"var _jsxFileName = \"/Users/dyomacbook/Desktop/front-end/src/components/Modal.js\";\nimport React, { useContext } from 'react';\nimport './Modal.css';\nimport axios from 'axios';\nimport { AuthContext, MessageContext } from '../context/store';\nimport { useLocation } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function (props) {\n  // 열기, 닫기, 모달 헤더 텍스트를 부모로부터 받아옴\n  // 모달 정보들 모두 부모로부터 받아옴\n  const {\n    open,\n    close,\n    header,\n    name,\n    description,\n    image,\n    price,\n    NFTrewardFactor,\n    tokenURI,\n    tokenId,\n    attributes\n  } = props;\n  const {\n    authstate\n  } = useContext(AuthContext);\n  const {\n    notify\n  } = useContext(MessageContext);\n  const location = useLocation();\n  var btn_nftcart = '강화하기'; //\n\n  const path = location.pathname.split('/'); //uri를 가지고 버튼 변경. 구매하기, 강화하기 \n\n  if (path[1] == 'marketplace') {\n    btn_nftcart = '구매하기';\n  } else if (path[1] == 'mypage') {\n    btn_nftcart = '강화하기';\n  } // axios.request({\n  //   method: 'GET',\n  //   url:'http://localhost:3030/offchain/nftmarket/myNFT',\n  // })\n  // .then((res) => {\n  //   console.log('myNFT 응답입니다.',res.data.tokenURI)\n  // })\n  // .catch((err) => console.log(err))\n\n\n  const handleSubmit = () => {\n    //인증 여부 확인 후 post 요청\n    if (!authstate.auth) {\n      alert('로그인 필요');\n      return;\n    } //구매하기 눌렀을때, tokenUri 만 보냄\n\n\n    if (path[1] == 'marketplace') {\n      console.log(\"구매하기 axios\");\n      axios.request({\n        method: 'POST',\n        url: '/onchain/serverNFYBuy',\n        data: {\n          tokenURI: \"kkk_tokenuri\"\n        },\n        withCredentials: true\n      }).then(res => {\n        console.log('구매하기 응답입니다.', res); //alret울림...?\n      }).catch(err => console.log(err));\n    } //mypage에서는 강화하기 진행\n    //test 필요!\n    //username 안보내도 됨!\n\n\n    if (path[1] == 'mypage') {\n      axios.request({\n        method: 'POST',\n        url: '/onchain/upgradeNFT',\n        data: {\n          tokenId: tokenId\n        },\n        withCredentials: true\n      }).then(res => {\n        if (res.data === '0') {\n          //모달 닫기\n          notify('강화에 실패했습니다! 다시 시도해 주세요', 'error');\n        } else if (res.data === '1') {\n          //모달 닫기\n          notify('레벨 1 -> 레벨 2 로 강화되었습니다!'); //getmyNft 다시 호출\n        } else if (res.data === '2') {\n          //모달 닫기\n          notify('레벨 2 -> 레벨 3 으로 강화되었습니다!'); //getmyNft 다시 호출\n        } else console.log(res.data);\n\n        console.log('강화하기 응답입니다.', res); //alret울림...?\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n  };\n\n  return (\n    /*#__PURE__*/\n    // 모달이 열릴때 openModal 클래스가 생성된다.\n    _jsxDEV(\"div\", {\n      className: open ? 'openModal modal' : 'modal',\n      children: open ? /*#__PURE__*/_jsxDEV(\"section\", {\n        children: [/*#__PURE__*/_jsxDEV(\"header\", {\n          children: [header, /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"close\",\n            onClick: close,\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n          children: [props.children, /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"modal_grid\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"g1\",\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  className: \"nftcard_image\",\n                  src: image\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 114,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 113,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"g2\",\n                children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"key\",\n                      children: \"name\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 119,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"value\",\n                      children: name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 120,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 118,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"key\",\n                      children: \"description\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 123,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"value\",\n                      children: description\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 124,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 122,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"key\",\n                      children: \"reward\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 127,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"value\",\n                      children: NFTrewardFactor\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 128,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 126,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"key\",\n                      children: \"price\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 131,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"value\",\n                      children: price\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 132,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 130,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"key\",\n                      children: \"attributes\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 135,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"value\",\n                      children: [attributes[0].trait_type, \": \", attributes[0].value]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 136,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 134,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 117,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 116,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleSubmit,\n            children: btn_nftcart\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this) : null\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 5\n    }, this)\n  );\n}\n;","map":{"version":3,"names":["React","useContext","axios","AuthContext","MessageContext","useLocation","props","open","close","header","name","description","image","price","NFTrewardFactor","tokenURI","tokenId","attributes","authstate","notify","location","btn_nftcart","path","pathname","split","handleSubmit","auth","alert","console","log","request","method","url","data","withCredentials","then","res","catch","err","children","trait_type","value"],"sources":["/Users/dyomacbook/Desktop/front-end/src/components/Modal.js"],"sourcesContent":["import React, {useContext} from 'react';\nimport './Modal.css';\nimport axios from 'axios'\nimport { AuthContext, MessageContext } from '../context/store'\nimport { useLocation } from 'react-router-dom';\n\nexport default function(props){\n  // 열기, 닫기, 모달 헤더 텍스트를 부모로부터 받아옴\n  // 모달 정보들 모두 부모로부터 받아옴\n  const { open, close, header, name, description, image, price, NFTrewardFactor, tokenURI, tokenId, attributes} = props;\n  const {authstate} = useContext(AuthContext);\n  const {notify} = useContext(MessageContext);\n  const location = useLocation();\n\n  var btn_nftcart = '강화하기';\n  //\n  const path = (location.pathname).split('/')\n  //uri를 가지고 버튼 변경. 구매하기, 강화하기 \n  if(path[1] == 'marketplace'){\n    btn_nftcart = '구매하기';\n  }else if(path[1] == 'mypage'){\n    btn_nftcart = '강화하기';\n  }\n  \n  // axios.request({\n  //   method: 'GET',\n  //   url:'http://localhost:3030/offchain/nftmarket/myNFT',\n  // })\n  // .then((res) => {\n  //   console.log('myNFT 응답입니다.',res.data.tokenURI)\n  // })\n  // .catch((err) => console.log(err))\n  \n\n  const handleSubmit = () => {\n     //인증 여부 확인 후 post 요청\n    if(!authstate.auth) {\n      alert('로그인 필요')\n      return;\n    }\n\n      //구매하기 눌렀을때, tokenUri 만 보냄\n    if(path[1] == 'marketplace'){\n      console.log(\"구매하기 axios\");\n      axios.request({\n        method: 'POST',\n        url:'/onchain/serverNFYBuy',\n        data: { tokenURI: \"kkk_tokenuri\"},\n        withCredentials: true\n      })\n      .then((res) => {\n        console.log('구매하기 응답입니다.',res)\n        //alret울림...?\n      })\n      .catch((err) => console.log(err))\n    }\n\n  //mypage에서는 강화하기 진행\n  //test 필요!\n  //username 안보내도 됨!\n    if(path[1] == 'mypage'){\n      axios.request({\n        method: 'POST',\n        url:'/onchain/upgradeNFT',\n        data: {tokenId : tokenId},\n        withCredentials: true\n      })\n      .then((res) => {\n        if(res.data === '0'){\n          //모달 닫기\n          notify('강화에 실패했습니다! 다시 시도해 주세요', 'error')\n        }\n        else if(res.data === '1'){\n          //모달 닫기\n          notify('레벨 1 -> 레벨 2 로 강화되었습니다!')\n          //getmyNft 다시 호출\n        }\n        else if(res.data === '2'){\n          //모달 닫기\n          notify('레벨 2 -> 레벨 3 으로 강화되었습니다!')\n          //getmyNft 다시 호출\n        }\n        else console.log(res.data)\n        console.log('강화하기 응답입니다.',res)\n        //alret울림...?\n      })\n      .catch((err) => {\n        console.log(err)\n      })\n    }\n\n  }\n      \n\n\n\n  return (\n    // 모달이 열릴때 openModal 클래스가 생성된다.\n    <div className={open ? 'openModal modal' : 'modal'}>\n      {open ? (\n        <section>\n          <header>\n            {header}\n            <button className=\"close\" onClick={close}>\n              &times;\n            </button>\n          </header>\n\n          <main>\n            {props.children}\n            <div>\n              <div class = 'modal_grid'>\n                <div class = 'g1'>\n                  <img className='nftcard_image' src={image} />\n                </div>\n                <div class = 'g2'>\n                  <ul>\n                    <li>\n                      <div className='key'>name</div>\n                      <div className='value'>{name}</div>\n                    </li>\n                    <li>\n                      <div className='key'>description</div>\n                      <div className='value'>{description}</div>\n                    </li>\n                    <li>\n                      <div className='key'>reward</div>\n                      <div className='value'>{NFTrewardFactor}</div>\n                    </li>\n                    <li>\n                      <div className='key'>price</div>\n                      <div className='value'>{price}</div>\n                    </li>\n                    <li>\n                      <div className='key'>attributes</div>\n                      <div className='value'>{attributes[0].trait_type}: {attributes[0].value}</div>\n                    </li>\n                  </ul>\n                </div>\n                \n              </div>\n            </div>\n          </main>\n\n          <footer>\n            <button onClick = {handleSubmit}>{btn_nftcart}</button>\n          </footer>\n        </section>\n      ) : null}\n    </div>\n  );\n};"],"mappings":"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"},"metadata":{},"sourceType":"module"}
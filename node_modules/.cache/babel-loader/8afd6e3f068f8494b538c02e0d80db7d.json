{"ast":null,"code":"var _jsxFileName = \"/Users/dyomacbook/Desktop/front-end/src/pages/Login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useState, useEffect } from 'react';\nimport { useNavigate } from \"react-router-dom\";\nimport axios from 'axios';\nimport './Login.css';\nimport { AuthContext, MessageContext } from '../context/store';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Login() {\n  _s();\n\n  const navigate = useNavigate();\n  const {\n    authstate,\n    login\n  } = useContext(AuthContext);\n  const {\n    notify\n  } = useContext(MessageContext);\n  const [Username, setUsername] = useState(\"\");\n  const [Password, setPassword] = useState(\"\");\n\n  const onUsernameHandler = event => {\n    setUsername(event.currentTarget.value);\n  };\n\n  const onPasswordHandler = event => {\n    setPassword(event.currentTarget.value);\n  };\n\n  useEffect(() => {\n    if (authstate.auth) {\n      //console.log(\"you already login\");\n      navigate('/');\n    } else {//console.log(\"카몬 mate\");\n    }\n\n    return () => {};\n  }, []);\n\n  const onSubmitHandler = () => {\n    // console.log('submit1');\n    // event.preventDefault(); // 페이지 리프레시가 안됨\n    // console.log('submit2');\n    if (Username.length === 0 || Password.length === 0) {\n      notify('username, password 모두 입력해주세요', 'error');\n      return;\n    }\n\n    let body = {\n      username: Username,\n      password: Password\n    };\n    axios.request({\n      method: 'POST',\n      url: 'offchain/auth/login',\n      data: body,\n      withCredentials: true\n    }).then(res => {\n      const user = res.data;\n      login({\n        id: user.id,\n        username: user.username\n      });\n      notify(`환영합니다! ${user.username}님`, 'success');\n      navigate('/');\n    }).catch(err => {\n      console.log(err);\n      if (err.response.data === '잘못된 비밀번호 입니다.') notify('잘못된 비밀번호입니다', 'error');else if (err.response.data === '계정이 존재하지 않습니다.') notify('계정이 존재하지 않습니다', 'error');else notify('로그인할 수 없습니다. 관리자에게 문의해주세요', 'error');\n    });\n  };\n\n  const onKeyPress = e => {\n    if (e.key === 'Enter') {\n      onSubmitHandler();\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"login\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form_container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"title\",\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"inputs\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"username\",\n          value: Username,\n          onChange: onUsernameHandler,\n          placeholder: \"Username\",\n          onKeyPress: onKeyPress\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          value: Password,\n          onChange: onPasswordHandler,\n          placeholder: \"Password\",\n          onKeyPress: onKeyPress\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"submit\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          onClick: onSubmitHandler,\n          children: \"\\uB85C\\uADF8\\uC778\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 3\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Login, \"X1doHgvpEHRX/xr6qNqUxZ5jte0=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useContext","useState","useEffect","useNavigate","axios","AuthContext","MessageContext","Login","navigate","authstate","login","notify","Username","setUsername","Password","setPassword","onUsernameHandler","event","currentTarget","value","onPasswordHandler","auth","onSubmitHandler","length","body","username","password","request","method","url","data","withCredentials","then","res","user","id","catch","err","console","log","response","onKeyPress","e","key"],"sources":["/Users/dyomacbook/Desktop/front-end/src/pages/Login.js"],"sourcesContent":["import React, { useContext, useState, useEffect } from 'react';\nimport { useNavigate } from \"react-router-dom\";\nimport axios from 'axios';\nimport './Login.css'\nimport { AuthContext, MessageContext } from '../context/store';\n\nexport default function Login() {\n\n  const navigate = useNavigate();\n  const {authstate, login} = useContext(AuthContext)\n  const {notify} = useContext(MessageContext)\n\n  const [Username, setUsername] = useState(\"\");\n  const [Password, setPassword] = useState(\"\");\n\n  const onUsernameHandler = (event) => {\n    setUsername(event.currentTarget.value);\n  }\n\n  const onPasswordHandler = (event) => {\n      setPassword(event.currentTarget.value);\n  }\n\n  useEffect(() => {\n\n    if(authstate.auth){\n      //console.log(\"you already login\");\n      navigate('/');\n    }else{\n      //console.log(\"카몬 mate\");\n    }\n    return () => {\n    }\n  }, [])\n\n\n  const onSubmitHandler = ()=> {\n    // console.log('submit1');\n    // event.preventDefault(); // 페이지 리프레시가 안됨\n    // console.log('submit2');\n    if(Username.length === 0 || Password.length === 0){\n      notify('username, password 모두 입력해주세요', 'error')\n      return;\n    }\n    let body = {\n      username: Username,\n      password: Password\n    }\n\n    axios.request({\n      method:'POST',\n      url:'offchain/auth/login',\n      data: body,\n      withCredentials: true\n    })\n    .then((res) => {\n      const user = res.data;\n      login({id: user.id, username: user.username})\n      notify(`환영합니다! ${user.username}님` , 'success')\n      navigate('/')\n    })\n    .catch((err) => {\n      console.log(err)\n      if(err.response.data === '잘못된 비밀번호 입니다.') notify('잘못된 비밀번호입니다', 'error')\n      else if(err.response.data === '계정이 존재하지 않습니다.') notify('계정이 존재하지 않습니다', 'error')\n      else notify('로그인할 수 없습니다. 관리자에게 문의해주세요','error')\n    })\n  }\n\n\n  const onKeyPress = (e) => {\n    if(e.key === 'Enter'){\n      onSubmitHandler();\n    }\n  }\n\n  return (\n    <div className='login'>\n  <div className='form_container'>\n    <div className='title'>Login</div>\n    <div className='inputs'>\n      <input type=\"username\" value={Username} onChange={onUsernameHandler} placeholder=\"Username\" onKeyPress={onKeyPress} />\n      <input type=\"password\" value={Password} onChange={onPasswordHandler}  placeholder=\"Password\" onKeyPress={onKeyPress} />\n    </div>\n    <div className='submit'>\n        <button type=\"submit\" onClick={onSubmitHandler}>\n            로그인\n        </button>\n    </div>\n  </div>\n  </div>\n\n  )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}
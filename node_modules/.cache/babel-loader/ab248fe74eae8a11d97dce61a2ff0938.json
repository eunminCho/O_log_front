{"ast":null,"code":"var _jsxFileName = \"/Users/dyomacbook/Desktop/front-end/src/components/MyComments.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext, useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport Comment from './Comment';\nimport axios from 'axios';\nimport { AuthContext, MessageContext } from '../context/store';\nimport './MyComments.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function MyComments() {\n  _s();\n\n  const [input, setInput] = useState('');\n  const [comments, setComments] = useState([]);\n  const location = useLocation();\n  const {\n    authstate\n  } = useContext(AuthContext);\n  const {\n    notify\n  } = useContext(MessageContext);\n  useEffect(() => {\n    getComments(); //test();\n  }, [location.pathname]); //댓글 요청\n\n  const getComments = () => {\n    axios.request({\n      method: 'GET',\n      url: `offchain/userinfo/comment/${location.pathname.slice(8)}`,\n      withCredentials: true\n    }).then(res => {\n      //console.log(res.data);\n      setComments(res.data.reverse());\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  const handleInput = e => {\n    setInput(e.target.value);\n  }; //댓글 추가 요청\n\n\n  const handleClick = () => {\n    if (!authstate.auth) {\n      notify('로그인이 필요합니다.', 'error');\n      return;\n    }\n\n    if (!input) {\n      return;\n    }\n\n    axios.request({\n      method: 'POST',\n      url: `offchain/userinfo/comment/${location.pathname.slice(8)}`,\n      data: {\n        contents: input\n      },\n      withCredentials: true\n    }).then(res => {\n      console.log(res);\n      setInput('');\n      notify('댓글이 등록되었습니다.', 'sccuess');\n      getComments();\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"upload_comment\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: input,\n          onChange: handleInput,\n          placeholder: \"\\uB313\\uAE00 \\uCD94\\uAC00...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleClick,\n        children: \"add\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this), !comments.length ? '' : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"comments_container\",\n      children: comments.map((el, idx) => {\n        return /*#__PURE__*/_jsxDEV(Comment, {\n          visiterName: el.visiterName,\n          contents: el.contents,\n          created_at: el.created_at\n        }, idx, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 20\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n}\n\n_s(MyComments, \"1sXbiAvqh2xV3uPN+xvWSnQ4KEI=\", false, function () {\n  return [useLocation];\n});\n\n_c = MyComments;\n\nvar _c;\n\n$RefreshReg$(_c, \"MyComments\");","map":{"version":3,"names":["React","useState","useContext","useEffect","useLocation","Comment","axios","AuthContext","MessageContext","MyComments","input","setInput","comments","setComments","location","authstate","notify","getComments","pathname","request","method","url","slice","withCredentials","then","res","data","reverse","catch","err","console","log","handleInput","e","target","value","handleClick","auth","contents","length","map","el","idx","visiterName","created_at"],"sources":["/Users/dyomacbook/Desktop/front-end/src/components/MyComments.js"],"sourcesContent":["import React, { useState, useContext, useEffect } from 'react'\nimport { useLocation } from 'react-router-dom';\nimport Comment from './Comment';\nimport axios from 'axios';\nimport { AuthContext, MessageContext } from '../context/store';\nimport './MyComments.css'\n\nexport default function MyComments() {\n  const [input, setInput] = useState('');\n  const [comments, setComments] = useState([]);\n  const location = useLocation();\n  const {authstate} = useContext(AuthContext);\n  const {notify} = useContext(MessageContext)\n\n  useEffect(() => {\n    getComments();\n    //test();\n  },[location.pathname])\n\n  //댓글 요청\n  const getComments = () => {\n    axios.request({\n      method: 'GET',\n      url: `offchain/userinfo/comment/${location.pathname.slice(8,)}`,\n      withCredentials: true\n    })\n    .then((res) => {\n      //console.log(res.data);\n      setComments(res.data.reverse())\n    })\n    .catch((err) => {\n      console.log(err)\n    })\n  }\n\n  const handleInput = (e) => {\n    setInput(e.target.value)\n  }\n\n  //댓글 추가 요청\n  const handleClick = () => {\n    if(!authstate.auth) {\n      notify('로그인이 필요합니다.', 'error')\n      return;\n    }\n    if(!input){\n      return;\n    }\n\n    axios.request({\n      method: 'POST',\n      url:`offchain/userinfo/comment/${location.pathname.slice(8,)}`,\n      data:{\n        contents: input\n      },\n      withCredentials: true\n    })\n    .then((res) => {\n      console.log(res)\n      setInput('')\n      notify('댓글이 등록되었습니다.','sccuess')\n      getComments();\n    })\n    .catch((err) => {\n      console.log(err)\n    })\n  }\n  \n  return (\n    <div>\n      <div className='upload_comment'>\n        <div className='input'>\n          <input type='text' value={input} onChange={handleInput} placeholder='댓글 추가...'/>\n        </div>\n        <button onClick={handleClick}>add</button>\n      </div>\n      {!comments.length ? '' :\n        <div className='comments_container'>\n          {comments.map((el, idx) => {\n            return <Comment key={idx} visiterName={el.visiterName} contents={el.contents} created_at={el.created_at} />\n          })}\n        </div>\n      }\n    </div>\n\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}